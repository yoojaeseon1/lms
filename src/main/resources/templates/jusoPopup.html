<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.thymeleaf.org" xmlns:http="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<script src="/vendor/jquery/jquery.min.js"></script>
<script language="javascript">
    //opener관련 오류가 발생하는 경우 아래 주석을 해지하고, 사용자의 도메인정보를 입력합니다. ("주소입력화면 소스"도 동일하게 적용시켜야 합니다.)
    //document.domain = "abc.go.kr";

    function init(){
        var url = location.href;
        var confmKey = "devU01TX0FVVEgyMDIxMDIxMjE5MDIzODExMDgwMjE=";//승인키
        // resultType항목 추가(2016.10.06)
        var resultType = "4"; // 도로명주소 검색결과 화면 출력유형, 1 : 도로명, 2 : 도로명+지번+상세보기(관련지번, 관할주민센터), 3 : 도로명+상세보기(상세건물명), 4 : 도로명+지번+상세보기(관련지번, 관할주민센터, 상세건물명)
        var inputYn = $("#inputYn").val();
        console.log("inputYn : " + inputYn);
        if(inputYn != "Y"){
            console.log("inputYn is Y");
            document.form.confmKey.value = confmKey;
            document.form.returnUrl.value = url;
            document.form.resultType.value = resultType; // resultType항목 추가(2016.10.06)
            document.form.action="https://www.juso.go.kr/addrlink/addrLinkUrl.do"; // 인터넷망
            //document.form.action="https://www.juso.go.kr/addrlink/addrMobileLinkUrl.do"; //모바일 웹인 경우, 인터넷망
            document.form.submit();

        }else{
            console.log("inputYn is not Y");
            const roadFullAddr = $("#roadFullAddr");
            const roadAddrPart1 = $("#roadAddrPart1").val();
            console.log("roadFullAddr : " + roadFullAddr);
            console.log("roadAddrPart1 : " + roadAddrPart1);
            /** API 서비스 제공항목 확대 (2017.02) **/
            opener.jusoCallBack($("#roadAddrPart1").val(),$("#addrDetail").val(), $("#roadAddrPart2").val(),$("#zipNo").val());
            window.close();
        }
    }
</script>
<body onload="init();">
<form id="form" name="form" method="post">
    <input type="hidden" id="confmKey" name="confmKey" value=""/>
    <input type="hidden" id="returnUrl" name="returnUrl" value=""/>
    <input type="hidden" id="resultType" name="resultType" value=""/> <!--resultType항목 추가(2016.10.06)-->
    <!-- 해당시스템의 인코딩타입이 EUC-KR일경우에만 추가 START-->
    <!--
    <input type="hidden" id="encodingType" name="encodingType" value="EUC-KR"/>
     -->
    <!-- 해당시스템의 인코딩타입이 EUC-KR일경우에만 추가 END-->

</form>
    <input type="hidden" id="roadFullAddr" th:value="${roadFullAddr}">
    <input type="hidden" id="inputYn" th:value="${inputYn}">
    <input type="hidden" id="zipNo" th:value="${zipNo}">
    <input type="hidden" id="roadAddrPart1" th:value="${roadAddrPart1}">
    <input type="hidden" id="addrDetail" th:value="${addrDetail}">
    <input type="hidden" id="roadAddrPart2" th:value="${roadAddrPart2}">
</body>
</html>